# Graceay holiday definitions for the Ruby Holiday gem.
#
# Updated: 2014-05-08
--- 
months:
  1: 
  - name: New Years
    regions: [graceway]
    mday: 1
  - name: Martin Luther King Jr
    week: 3
    regions: [graceway]
    wday: 1
  - name: Sanctity of Life Week
    week: 3
    wday: 0
    regions: [graceway]
  2: 
  - name: Superbowl Sunday
    week: 1
    regions: [graceway]
    wday: 0
  - name: Valentine's Day
    mday: 14
    regions: [graceway]
  3: 
  - name: Ash Wednesday
    regions: [graceway]
    function: easter(year)-46
  - name: Lent
    regions: [graceway]
    function: easter(year)-46
  - name: Daylight Savings Begins
    regions: [graceway]
    week: 2
    wday: 0
  - name: St Patrick's Day
    regions: [graceway]
    mday: 17
  4:
  - name: Palm Sunday
    regions: [graceway]
    function: easter(year)-7
  - name: Passover
    regions: [graceway]
    function: easter(year)-5
  - name: Good Friday
    regions: [graceway]
    function: easter(year)-2
  - name: Easter Sunday
    regions: [graceway]
    function: easter(year)
  5: 
  - name: National Day of Prayer
    regions: [graceway]
    week: 1
    wday: 4
  - name: Mothers Day
    regions: [graceway]
    week: 2
    wday: 0
  - name: Graduation
    regions: [graceway]
    week: 3
    wday: 0
    hidedate: true
  - name: Memorial Day
    week: -1
    regions: [graceway]
    wday: 1
  6:
  - name: Pentecost
    regions: [graceway]
    function: easter(year)+50
  - name: Fathers Day
    regions: [graceway]
    week: 3
    wday: 0
  - name: Trinity Sunday
    regions: [graceway]
    function: easter(year)+57
  7: 
  - name: Independence Day
    regions: [graceway]
    mday: 4
  - name: VBS
    regions: [graceway]
    week: 2
    wday: 0
    hidedate: true 
  8:
  - name: Back to School
    regions: [graceway]
    week: 2
    wday: 0
    hidedate: true
  9: 
  - name: Labor Day
    week: 1
    regions: [graceway]
    wday: 1
  - name: See You at the Pole
    regions: [graceway]
    week: 4
    wday: 3
  10: 
  - name: Pastor Appreciation
    regions: [graceway]
    week: 2
    wday: 0
  - name: Halloween
    regions: [graceway]
    mday: 31
  - name: Reformation Day
    regions: [graceway]
    mday: 31
  11: 
  - name: Daylight Savings Ends
    regions: [graceway]
    week: 1
    wday: 0
  - name: Election Day
    regions: [graceway]
    week: 2
    wday: 0
    hidedate: true
  - name: Veterans Day
    regions: [graceway]
    mday: 11
  - name: Thanksgiving
    week: 4
    regions: [graceway]
    wday: 4
  12: 
#  - name: Advent
#    regions: [graceway]
#    function: advent_sunday(year)
  - name: Christmas Day
    regions: [graceway]
    mday: 25
methods:
  advent_sunday: |
    def self.advent_sunday(year)
      d = Date.new(year, 11, -1)
      d -= (d.wday - 4) % 7
      d + 3
    end
tests: |
    {Date.civil(2014,1,1)   => 'New Years', 
     Date.civil(2014,1,19)  => 'Sanctity of Life Week',
     Date.civil(2014,1,20)  => 'Martin Luther King Jr',
     Date.civil(2014,2,14)  => "Valentine\'s Day",
     Date.civil(2014,3,5)   => 'Ash Wednesday',
     Date.civil(2014,3,9)   => 'Daylight Savings Begins',
     Date.civil(2014,4,20)  => 'Easter Sunday',
     Date.civil(2014,5,1)   => 'National Day of Prayer',
     Date.civil(2014,5,11)  => 'Mothers Day',
     Date.civil(2014,5,26)  => 'Memorial Day',
     Date.civil(2014,6,15)  => 'Fathers Day',
     Date.civil(2014,7,4)   => 'Independence Day',
     Date.civil(2014,9,1)   => 'Labor Day',
     Date.civil(2014,9,24)  => 'See You at the Pole',
     Date.civil(2014,10,12) => 'Pastor Appreciation',
     Date.civil(2014,11,2)  => 'Daylight Savings Ends',
     Date.civil(2014,11,11) => 'Veterans Day',
     Date.civil(2014,11,27) => 'Thanksgiving',
     Date.civil(2014,12,25) => 'Christmas Day'}.each do |date, name|
      assert_equal name, (Holidays.on(date, :graceway)[0] || {})[:name]
    end
